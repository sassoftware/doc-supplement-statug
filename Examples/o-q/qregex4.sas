/****************************************************************/
/*          S A S   S A M P L E   L I B R A R Y                 */
/*                                                              */
/*    NAME: qregex4                                             */
/*   TITLE: Documentation Example 4 for PROC QUANTREG           */
/* PRODUCT: STAT                                                */
/*  SYSTEM: ALL                                                 */
/*    KEYS: Quantile Regression                                 */
/*                                                              */
/*   PROCS: QUANTREG                                            */
/*    DATA: ozone                                               */
/*                                                              */
/*     REF:                                                     */
/*    MISC:                                                     */
/****************************************************************/

data ozone;
   days = _n_;
   input ozone @@;
   datalines;
0.0060 0.0060 0.0320 0.0320 0.0320 0.0150 0.0150 0.0150 0.0200 0.0200
0.0160 0.0070 0.0270 0.0160 0.0150 0.0240 0.0220 0.0220 0.0220 0.0185
0.0150 0.0150 0.0110 0.0070 0.0070 0.0240 0.0380 0.0240 0.0265 0.0290
0.0310 0.0460 0.0360 0.0260 0.0300 0.0250 0.0280 0.0310 0.0370 0.0325
0.0280 0.0350 0.0400 0.0310 0.0310 0.0380 0.0380 0.0320 0.0260 0.0320
0.0160 0.0160 0.0255 0.0350 0.0350 0.0200 0.0255 0.0310 0.0250 0.0340
0.0320 0.0380 0.0410 0.0380 0.0350 0.0380 0.0360 0.0380 0.0360 0.0330
0.0510 0.0510 0.0690 0.0360 0.0380 0.0480 0.0480 0.0190 0.0190 0.0490
0.0460 0.0450 0.0460 0.0470 0.0680 0.0690 0.0600 0.0600 0.0270 0.0270
0.0330 0.0400 0.0460 0.0425 0.0390 0.0380 0.0410 0.0370 0.0420 0.0380
0.0340 0.0390 0.0460 0.0440 0.0530 0.0620 0.0480 0.0495 0.0510 0.0580
0.0550 0.0520 0.0530 0.0560 0.0330 0.0700 0.0650 0.0520 0.0390 0.0680
0.0590 0.0500 0.0390 0.0590 0.0510 0.0430 0.0480 0.0530 0.0530 0.0530
0.0320 0.0320 0.0320 0.0550 0.0550 0.0550 0.0750 0.0770 0.0730 0.0350
0.0560 0.0750 0.0730 0.0710 0.0630 0.0550 0.0460 0.0590 0.0740 0.0730
0.0750 0.0740 0.0640 0.0740 0.0560 0.0280 0.0580 0.0530 0.0750 0.0360
0.0280 0.0460 0.0460 0.0150 0.0500 0.0340 0.0350 0.0540 0.0750 0.0690
0.0360 0.0470 0.0620 0.0680 0.0850 0.0850 0.0910 0.1010 0.0780 0.0420
0.0690 0.1430 0.1070 0.1040 0.0500 0.0280 0.0650 0.0970 0.0620 0.0830
0.0780 0.0940 0.0680 0.0600 0.0510 0.0520 0.0540 0.0690 0.0860 0.0720
0.0760 0.0780 0.0820 0.0850 0.1000 0.0890 0.0840 0.0210 0.0610 0.0790
0.0540 0.0550 0.0560 0.0870 0.0960 0.0720 0.0830 0.0720 0.0430 0.0370
0.0730 0.0620 0.0660 0.0600 0.0970 0.1180 0.1060 0.0770 0.0580 0.0430
0.0600 0.0560 0.0620 0.0440 0.0580 0.0630 0.0630 0.0890 0.1320 0.0880
0.0600 0.0720 0.0820 0.0520 0.0390 0.0510 0.0670 0.0670 0.0650 0.0250
0.0810 0.0830 0.0600 0.0400 0.0490 0.0670 0.0390 0.0270 0.0300 0.0315
0.0330 0.0420 0.0490 0.0360 0.0180 0.0240 0.0300 0.0290 0.0470 0.0410
0.0440 0.0480 0.0330 0.0550 0.0425 0.0300 0.0380 0.0330 0.0220 0.0240
0.0260 0.0310 0.0290 0.0360 0.0660 0.0460 0.0840 0.0840 0.0430 0.0430
0.0280 0.0130 0.0130 0.0200 0.0270 0.0200 0.0580 0.0530 0.0560 0.0550
0.0570 0.0680 0.0620 0.0390 0.0340 0.0020 0.0140 0.0080 0.0250 0.0250
0.0240 0.0230 0.0230 0.0165 0.0100 0.0240 0.0420 0.0260 0.0240 0.0240
0.0240 0.0240 0.0240 0.0300 0.0300 0.0290 0.0280 0.0270 0.0180 0.0220
0.0240 0.0240 0.0240 0.0030 0.0030 0.0030 0.0030 0.0010 0.0010 0.0020
0.0030 0.0170 0.0310 0.0030 0.0080 0.0130 0.0210 0.0140 0.0090 0.0100
0.0170 0.0090 0.0170 0.0250 0.0280 0.0190 0.0210 0.0170 0.0080 0.0340
0.0060 0.0140 0.0140 0.0220 0.0220 0.0220 0.0160 0.0160 0.0210 0.0205
0.0200 0.0220 0.0225 0.0230 0.0290 0.0350 0.0270 0.0215 0.0160 0.0105
0.0050 0.0230 0.0230 0.0205 0.0180 0.0180 0.0070 0.0175 0.0280 0.0230
0.0295 0.0360 0.0360 0.0230 0.0100 0.0100 0.0080 0.0080 0.0080 0.0230
0.0230 0.0230 0.0170 0.0320 0.0330 0.0340 0.0070 0.0170 0.0270 0.0270
0.0270 0.0240 0.0240 0.0240 0.0360 0.0300 0.0210 0.0210 0.0280 0.0280
0.0320 0.0280 0.0305 0.0330 0.0240 0.0260 0.0330 0.0280 0.0300 0.0320
0.0310 0.0200 0.0240 0.0280 0.0130 0.0410 0.0350 0.0550 0.0450 0.0450
0.0380 0.0380 0.0340 0.0300 0.0360 0.0500 0.0500 0.0410 0.0410 0.0370
0.0380 0.0220 0.0340 0.0380 0.0110 0.0280 0.0360 0.0190 0.0410 0.0360
0.0350 0.0350 0.0450 0.0440 0.0400 0.0360 0.0300 0.0370 0.0390 0.0410
0.0520 0.0360 0.0440 0.0440 0.0340 0.0460 0.0540 0.0740 0.0710 0.0610
0.0670 0.0810 0.0610 0.0470 0.0390 0.0330 0.0480 0.0480 0.0370 0.0370
0.0520 0.0580 0.0720 0.0710 0.0390 0.0520 0.0520 0.0390 0.0590 0.0600
0.0320 0.0480 0.0510 0.0580 0.0580 0.0380 0.0380 0.0410 0.0420 0.0680
0.0330 0.0490 0.0460 0.0440 0.0420 0.0530 0.0630 0.0590 0.0440 0.0450
0.0460 0.0540 0.0740 0.0380 0.0500 0.0400 0.0410 0.0390 0.0920 0.0970
0.0690 0.1110 0.0830 0.0550 0.0220 0.0220 0.0530 0.0550 0.0550 0.0450
0.0450 0.0870 0.0670 0.0860 0.0890 0.0630 0.0360 0.0380 0.0860 0.0980
0.0660 0.0340 0.0380 0.0670 0.0830 0.0450 0.0450 0.0290 0.0130 0.0200
0.0220 0.0590 0.0920 0.0900 0.0990 0.0660 0.0280 0.0360 0.0260 0.0650
0.0490 0.0440 0.0520 0.0570 0.0570 0.0860 0.0190 0.0370 0.0390 0.0710
0.1060 0.0250 0.0380 0.0300 0.0490 0.0560 0.0640 0.0520 0.0750 0.0600
0.0450 0.0840 0.0680 0.0990 0.0220 0.0350 0.0350 0.0010 0.0080 0.0150
0.0150 0.0880 0.0560 0.0530 0.0700 0.0350 0.0460 0.0650 0.0740 0.0460
0.0330 0.0360 0.0190 0.0520 0.0310 0.0290 0.0180 0.0580 0.0430 0.0060
0.0360 0.0240 0.0230 0.0220 0.0270 0.0220 0.0090 0.0290 0.0280 0.0290
0.0090 0.0230 0.0250 0.0150 0.0380 0.0530 0.0500 0.0270 0.0040 0.0290
0.0270 0.0220 0.0170 0.0290 0.0350 0.0150 0.0030 0.0130 0.0130 0.0135
0.0140 0.0140 0.0260 0.0100 0.0260 0.0110 0.0040 0.0100 0.0250 0.0250
0.0080 0.0080 0.0090 0.0100 0.0050 0.0030 0.0050 0.0040 0.0040 0.0200
0.0230 0.0190 0.0100 0.0080 0.0040 0.0025 0.0010 0.0010 0.0010 0.0010
0.0010 0.0010 0.0010 0.0055 0.0100 0.0100 0.0100 0.0100 0.0100 0.0100
0.0100 0.0130 0.0130 0.0180 0.0230 0.0230 0.0220 0.0210 0.0200 0.0230
0.0230 0.0240 0.0250 0.0250 0.0180 0.0040 0.0140 0.0150 0.0280 0.0160
0.0310 0.0310 0.0310 0.0215 0.0120 0.0120 0.0120 0.0110 0.0160 0.0160
0.0160 0.0205 0.0250 0.0250 0.0250 0.0250 0.0250 0.0240 0.0240 0.0240
0.0150 0.0080 0.0115 0.0150 0.0150 0.0190 0.0190 0.0190 0.0150 0.0150
0.0180 0.0220 0.0260 0.0240 0.0220 0.0210 0.0200 0.0230 0.0180 0.0230
0.0280 0.0280 0.0275 0.0270 0.0210 0.0210 0.0250 0.0250 0.0150 0.0150
0.0220 0.0220 0.0240 0.0360 0.0330 0.0330 0.0330 0.0060 0.0060 0.0060
0.0280 0.0280 0.0120 0.0120 0.0190 0.0260 0.0270 0.0180 0.0120 0.0250
0.0190 0.0230 0.0280 0.0310 0.0230 0.0180 0.0230 0.0220 0.0280 0.0370
0.0380 0.0380 0.0230 0.0230 0.0290 0.0280 0.0290 0.0280 0.0320 0.0380
0.0300 0.0295 0.0290 0.0310 0.0390 0.0410 0.0410 0.0410 0.0410 0.0360
0.0360 0.0365 0.0370 0.0370 0.0250 0.0305 0.0360 0.0370 0.0380 0.0350
0.0310 0.0320 0.0420 0.0500 0.0430 0.0550 0.0630 0.0320 0.0390 0.0405
0.0420 0.0420 0.0310 0.0530 0.0530 0.0560 0.0490 0.0460 0.0400 0.0400
0.0285 0.0170 0.0500 0.0290 0.0580 0.0590 0.0600 0.0540 0.0535 0.0530
0.0480 0.0430 0.0340 0.0490 0.0600 0.0470 0.0420 0.0530 0.0360 0.0660
0.0660 0.0620 0.0590 0.0790 0.0750 0.0810 0.0810 0.0430 0.0430 0.0500
0.0450 0.0800 0.1020 0.0610 0.0620 0.0580 0.0630 0.0680 0.0770 0.0520
0.0600 0.0710 0.0680 0.0680 0.0680 0.0380 0.0440 0.0440 0.0570 0.0790
0.0970 0.0710 0.0770 0.0510 0.0900 0.0730 0.0550 0.0530 0.0570 0.0600
0.0820 0.0990 0.0680 0.0390 0.0560 0.0710 0.0860 0.1150 0.0760 0.0610
0.0640 0.0550 0.0720 0.0820 0.0490 0.0530 0.0700 0.0760 0.0510 0.0530
0.0750 0.0710 0.0590 0.0560 0.0595 0.0630 0.1120 0.1070 0.1160 0.1270
0.1130 0.0940 0.0840 0.0730 0.0720 0.0640 0.0620 0.0420 0.0740 0.0580
0.0510 0.0820 0.0950 0.1060 0.0730 0.0490 0.0370 0.0530 0.0880 0.0880
0.0830 0.0520 0.0380 0.0520 0.0930 0.0790 0.0690 0.0910 0.0780 0.0300
0.0210 0.0280 0.0220 0.0530 0.0570 0.0810 0.0700 0.0690 0.0590 0.0620
0.1080 0.1020 0.0470 0.0380 0.0580 0.0630 0.0230 0.0440 0.0620 0.0650
0.0810 0.0710 0.0490 0.0430 0.0530 0.0320 0.0730 0.0530 0.0690 0.0530
0.0610 0.0330 0.0310 0.0410 0.0610 0.0500 0.0390 0.0360 0.0250 0.0320
0.0320 0.0560 0.0650 0.0640 0.0610 0.0470 0.0550 0.0430 0.0290 0.0260
0.0340 0.0560 0.0350 0.0190 0.0230 0.0250 0.0320 0.0300 0.0300 0.0300
0.0350 0.0240 0.0300 0.0330 0.0460 0.0580 0.0340 0.0490 0.0530 0.0360
0.0370 0.0280 0.0300 0.0260 0.0260 0.0260 0.0260 0.0260 0.0260 0.0260
0.0220 0.0180 0.0180 0.0180 0.0180 0.0180 0.0180 0.0180 0.0330 0.0235
0.0140 0.0180 0.0220 0.0340 0.0340 0.0090 0.0090 0.0140 0.0190 0.0220
0.0230 0.0240 0.0250 0.0310 0.0240 0.0170 0.0170 0.0150 0.0150 0.0185
0.0220 0.0210 0.0210 0.0130 0.0130 0.0130 0.0330 0.0330 0.0330 0.0325
0.0320 0.0320 0.0320 0.0120 0.0200 0.0200 0.0200 0.0320 0.0320 0.0250
0.0180 0.0180 0.0270 0.0270 0.0290
;

ods graphics on;

proc quantreg data=ozone algorithm=smooth ci=none plot=fitplot(nodata);
   effect sp = spline( days / knotmethod = list
          (90 182 272 365 455 547 637 730 820 912 1002) );
   model ozone = sp / quantile = 0.5 0.75 0.90 0.95 seed=1268;
run;
